---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1);
---
<style is:global>
  [x-cloak] { display: none !important; }
</style>

<header x-data="{ showmenu: false }" class="relative z-50 bg-secondary-400">
  <div class="max-w-[1200px] mx-auto p-4 flex items-center justify-end">
    <!-- Knappen ligger altid over menuen -->
    <button id="menuToggle"
            class="ml-auto z-50 relative"
            aria-controls="menu"
            :aria-expanded="showmenu"
            x-on:click="showmenu = !showmenu">
      <!-- Burger -->
      <svg x-show="!showmenu" x-cloak xmlns="http://www.w3.org/2000/svg" fill="none"
           viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-10">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25" />
      </svg>
      <!-- Kryds -->
      <svg x-show="showmenu" x-cloak xmlns="http://www.w3.org/2000/svg" fill="none"
           viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-10">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Fullscreen overlay menu (ligger under knappen pga. lavere z) -->
  <nav id="menu"
       class="fixed inset-0 bg-secondary-400 z-40 flex flex-col items-center justify-center"
       x-show="showmenu"
       x-transition:enter="transition ease-out duration-500"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-300"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       x-on:click.outside="showmenu = false">
    <ul class="space-y-6 text-2xl">
      <li class="text-center">
        <a href="/" class={currentPath === "" ? "font-bold underline" : ""} x-on:click="showmenu = false">Forside</a>
      </li>
      <li class="text-center">
        <a href="/komponentbibliotek/" class={currentPath === "komponentbibliotek/" ? "font-bold underline" : ""} x-on:click="showmenu = false">
          Komponentbibliotek
        </a>
      </li>
    </ul>
  </nav>
</header>
